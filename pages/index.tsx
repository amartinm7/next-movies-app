import type { NextPage } from "next";
import Head from "next/head";
import styles from "../styles/Home.module.css";
import { Container, Spacer, Text } from "@nextui-org/react";
import Theme from "@/components/themes/themes";
import { EchCard } from "@/components/card";
import { getTrending } from "@/pages/api/trending/[...index]";
import { EchGrid } from "@/components/grid";

// @ts-ignore
const getMovieCard = ({ item, index }) => (
  <EchCard
    key={index}
    imageSrc={`https://image.tmdb.org/t/p/w500${item.poster_path}`}
    title={item.title}
    year={item.release_date}
  />
);

// @ts-ignore
const getMovies = (
  data // @ts-ignore
) => data?.results?.map((item, index) => getMovieCard({ item, index }));

// @ts-ignore
const Home: NextPage = ({ data }) => {
  return (
    <div className={styles.container}>
      <Head>
        <title>NextUI | Create Next App</title>
        <meta
          name="description"
          content="Generated by create next app and using NextUI as a react UI library"
        />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Container as="main" display="inline">
        <Spacer />
        <Theme />
        <Text h1 className={styles.title}>
          Estrenos Cine Hoy
        </Text>

        <Spacer />
      </Container>
      <EchGrid>{getMovies(data)}</EchGrid>
    </div>
  );
};

// @ts-ignore
export const getServerSideProps: GetServerSideProps<Context<string>> = async (
  context
) => {
  const trendingMovies = await getTrending({
    resource: "movies",
    period: "week",
    language: "es-ES",
  });
  return {
    props: {
      data: trendingMovies,
    },
  };
};

export default Home;

{
  /*<NextLink href="/docs/components/button">*/
}
{
  /*  <Link block color="secondary">*/
}
{
  /*    Go to Button*/
}
{
  /*  </Link>*/
}
{
  /*</NextLink>*/
}
{
  /*<NextLink href="/docs/components/button">*/
}
{
  /*  <Link block color="secondary">*/
}
{
  /*    Go to Button*/
}
{
  /*  </Link>*/
}
{
  /*</NextLink>*/
}
{
  /*&nbsp;&&nbsp;*/
}
{
  /*<NextLink href="/docs/components/button">*/
}
{
  /*  <Link block color="secondary">*/
}
{
  /*    Go to Button*/
}
{
  /*  </Link>*/
}
{
  /*</NextLink>*/
}
